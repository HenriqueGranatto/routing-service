FROM ubuntu:18.04

ARG OSRM_FILE
ARG OSRM_FILE_NAME

RUN apt-get update
RUN apt-get install -y wget build-essential git cmake pkg-config \
libbz2-dev libstxxl-dev libstxxl1v5 libxml2-dev \
libzip-dev libboost-all-dev lua5.2 liblua5.2-dev libtbb-dev \
libluabind-dev libluabind0.9.1v5 

# INSTALL OSRM
RUN git clone https://github.com/Project-OSRM/osrm-backend.git

WORKDIR /osrm-backend

RUN mkdir -p build
RUN build
RUN cmake .. -DCMAKE_BUILD_TYPE=Release
RUN cmake --build .
RUN cmake --build . --target install
